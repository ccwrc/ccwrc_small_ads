{% extends "::base.html.twig" %}

{% block title %}SmallAdsBundle:Ad:showAd{% endblock %}

{% block body %}

    <h1>Welcome to the Ad:showAd page</h1>

    Tytuł ogłoszenia: {{ ad.title }} <br/><br/>
    Opis ogłoszenia: {{ ad.description }} <br/><br/>
    Ogłoszenie wygasa: {{ ad.endDate.date | date("d/m/Y H:i:s") }} <br/><br/>

    {% if ad.photoPath is not empty %}
        Zdjęcie: <br/><br/>
        <img src="{{ asset('/bundles/SmallAdsBundle/uploads_img/' ~ ad.photoPath) }}">
    {% endif %}

    <br/><br/>
    <a href="{{ path("smallads_comment_createcomment", {"id":ad.id}) }}">Skomentuj ogłoszenie</a>
    <br/><br/>

    {# na poxniej - nie dziala zgodnie z zalozeniami#}
    {#   {% render url('smallads_comment_createcomment', {'id': ad.id}) %}#}
    {#{{ render(controller('SmallAdsBundle:Comment:createComment', {'id': ad.id})) }}#}
    {# {% render controller('SmallAdsBundle:Comment:create_comment.html.twig', {"id": ad.id }) %}#}

    {% for comment in ad.comments %}
        {{ comment.date | date("d/m/Y H:i:s") }} Dodany przez:
        {% if comment.user is not null %}
            {{ comment.user }} {{ comment.user.id }}
        {% else %}
            Anonim
        {% endif %} <br/>
        {{ comment.text }} 

        {% if comment.user.id is defined %}
            {% if (app.user.id) == (comment.user.id) %} {# można dodac opcje usuwania komentarzy przez właściciela ogłoszenia #}
                <a href="{{ path("smallads_comment_deletecomment", {"id":comment.id, "adId":ad.id}) }}">Usuń</a>
            {% endif %}
        {% endif %}

        <br/><br/>
    {% else %}
        Brak komentarzy
    {% endfor %}

{% endblock %}
